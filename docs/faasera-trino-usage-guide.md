
# Faasera Trino Connector â€“ Usage Guide

The **Faasera Trino Connector** enables secure, policy-based data masking and profiling directly within Trino using SQL functions. This connector integrates with the Faasera Profiler Service and supports a wide range of privacy-preserving operations at query time.

---

## Prerequisites

- **Trino Version**: 414 or higher recommended  
- **Java**: JDK 21  
- **Faasera Profiler**: Running and accessible
- **Package**: You should have received `faasera-trino-connector-{version}.jar`

---

## Installation Steps

1. **Copy the JAR to Trino's plugin directory**

   ```bash
   cp faasera-trino-connector-*.jar /usr/lib/trino/plugin/faasera/
   ```

   Create the `faasera` directory if it doesnâ€™t exist.

2. **Configure the Faasera plugin**

   Edit Trinoâ€™s configuration file:  
   `/etc/trino/catalog/faasera.properties`

   ```properties
   connector.name=faasera
   faasera.policy.default=default
   ```

3. **Restart Trino**

   ```bash
   systemctl restart trino
   ```

   Or use your cluster restart command.

---

## Available SQL Functions

You can use the following scalar functions in Trino queries:

### Masking Functions

| Function                 | Description                                           |
|--------------------------|-------------------------------------------------------|
| `faasera_mask(value, type, policy)`      | Mask a single value using specified rule type and policy |
| `faasera_mask_batch(array, type, policy)`| Mask an array of values using specified rule             |

```sql
SELECT faasera_mask('john.doe@example.com', 'EMAIL_ADDRESS', 'default');
```

```sql
SELECT faasera_mask_batch(ARRAY['4111111111111111', '5555444433331111'], 'CREDITCARD_NUMBER', 'default');
```

---

### ðŸ”Ž Profiling Functions

| Function                            | Description                                                 |
|-------------------------------------|-------------------------------------------------------------|
| `faasera_profile_batch(array, policy)`         | Detect the most frequent entity type in a batch of values   |
| `faasera_profile_and_mask(value, policy)`      | Detect entity and mask a single value accordingly           |
| `faasera_profile_and_mask_batch(array, policy)`| Detect most common entity and mask all values in the array  |

```sql
SELECT faasera_profile_batch(ARRAY['john', 'jane'], 'default');
```

```sql
SELECT faasera_profile_and_mask('123-45-6789', 'default');
```

```sql
SELECT faasera_profile_and_mask_batch(ARRAY['Alice', 'Bob'], 'default');
```

---

### Explanation & Policy Metadata

| Function             | Description                                   |
|----------------------|-----------------------------------------------|
| `faasera_explain(policy, value)` | Returns the recognizer metadata and match description |
| `faasera_get_policies()`         | Lists all available masking policies             |
| `faasera_get_policy(name)`      | Shows detailed configuration of a policy         |
| `faasera_get_alerts()`          | Lists recent alerts generated by Faasera         |

```sql
SELECT faasera_explain('default', 'Dr. Alice Smith');
```

```sql
SELECT faasera_get_policies();
```

```sql
SELECT faasera_get_policy('default');
```

---

## Security & Access

- All masking and profiling is **policy-driven** and adheres to enterprise privacy controls configured in Faasera.
- If deployed in an air-gapped or secure network, ensure the Faasera engine is reachable to the Trino cluster.

---

## Support

- **Docs**: [https://docs.faasera.ai](https://docs.faasera.ai)
- **Support**: [support@faasera.ai](mailto:support@faasera.ai)
- **Live Chat**: [https://faasera.ai](https://faasera.ai)

---

Â© 2025 Faasera. All rights reserved.
